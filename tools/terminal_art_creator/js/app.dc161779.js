(function(){"use strict";var e={3450:function(e,t,i){var n=i(7238),s=i(4201),a=i(6328);const l={class:"container"},r={class:"settings-panel"},o={class:"canvas-size-controls"},h={class:"canvas-size-control"},c={class:"canvas-size-control"},d={class:"pixel-size-control"},u={class:"action-buttons"},f={class:"canvas-container"};function g(e,t,i,n,s,g){const v=(0,a.g2)("a-layout-header"),p=(0,a.g2)("Palette"),m=(0,a.g2)("a-input-number"),C=(0,a.g2)("a-button"),x=(0,a.g2)("a-popconfirm"),k=(0,a.g2)("a-link"),b=(0,a.g2)("a-drawer"),w=(0,a.g2)("PixelCanvas"),y=(0,a.g2)("a-layout-content"),P=(0,a.g2)("a-layout");return(0,a.uX)(),(0,a.Wv)(P,null,{default:(0,a.k6)((()=>[(0,a.bF)(v),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",l,[(0,a.Lk)("div",r,[(0,a.bF)(p,{onColorSelected:g.handleColorSelected},null,8,["onColorSelected"]),(0,a.Lk)("div",o,[(0,a.Lk)("div",h,[t[3]||(t[3]=(0,a.Lk)("label",{for:"canvas-width"},"画布宽度：",-1)),(0,a.bF)(m,{id:"canvas-width",modelValue:s.canvasWidth,"onUpdate:modelValue":t[0]||(t[0]=e=>s.canvasWidth=e),min:1,max:50,step:2},null,8,["modelValue"])]),(0,a.Lk)("div",c,[t[4]||(t[4]=(0,a.Lk)("label",{for:"canvas-height"},"画布高度：",-1)),(0,a.bF)(m,{id:"canvas-height",modelValue:s.canvasHeight,"onUpdate:modelValue":t[1]||(t[1]=e=>s.canvasHeight=e),min:1,max:50,step:2},null,8,["modelValue"])])]),(0,a.Lk)("div",d,[t[5]||(t[5]=(0,a.Lk)("label",{for:"pixel-size"},"像素宽度（px）：",-1)),(0,a.bF)(m,{id:"pixel-size",modelValue:s.pixelSize,"onUpdate:modelValue":t[2]||(t[2]=e=>s.pixelSize=e),min:1,max:50,step:1},null,8,["modelValue"])]),(0,a.Lk)("div",u,[(0,a.bF)(C,{onClick:g.saveCanvas,type:"dashed"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("保存")]))),_:1},8,["onClick"]),(0,a.bF)(C,{onClick:g.exportCanvas,type:"dashed"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("导出为图片")]))),_:1},8,["onClick"]),(0,a.bF)(C,{onClick:g.exportAsTerminalArt,type:"dashed"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("导出为终端字符画")]))),_:1},8,["onClick"]),(0,a.bF)(x,{content:"确定要清空画布吗？",okText:"Yes",cancelText:"No",onOk:g.clearCanvas},{default:(0,a.k6)((()=>[(0,a.bF)(C,{status:"danger"},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)(" 清除 ")]))),_:1})])),_:1},8,["onOk"])]),t[25]||(t[25]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(C,{type:"primary",onClick:g.handleClick},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.eW)("说明")]))),_:1},8,["onClick"]),(0,a.bF)(b,{width:400,visible:s.drewVisible,onOk:g.handleOk,onCancel:g.handleCancel,unmountOnClose:""},{title:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.Lk)("h1",null,"说明",-1)]))),default:(0,a.k6)((()=>[t[13]||(t[13]=(0,a.Lk)("h2",null,"原理",-1)),t[14]||(t[14]=(0,a.Lk)("p",null," 在Unicode字符中 \\u2584 为 ▄ ，\\u2580 为 ▀ ,配合终端控制字符便可显示出像素画。 ",-1)),t[15]||(t[15]=(0,a.Lk)("p",null," 本项目可快速用于快速制作终端程序logo，也可用于绘制像素画。 ",-1)),t[16]||(t[16]=(0,a.Lk)("h2",null,"使用",-1)),t[17]||(t[17]=(0,a.Lk)("li",null,"按住鼠标左键开始绘制",-1)),t[18]||(t[18]=(0,a.Lk)("li",null,"按住Ctrl鼠标经过的地方也可绘制",-1)),t[19]||(t[19]=(0,a.Lk)("li",null,"按住鼠标右键擦除",-1)),t[20]||(t[20]=(0,a.Lk)("li",null,"导出为终端字符画会将像素画转义的字符串写入剪贴板",-1)),t[21]||(t[21]=(0,a.Lk)("li",null,"导出为图片如字面意",-1)),t[22]||(t[22]=(0,a.Lk)("li",null,"擦除即清空画板",-1)),t[23]||(t[23]=(0,a.Lk)("li",null,"保存会将当前像素画保存到Localstorage(只有一张)",-1)),t[24]||(t[24]=(0,a.Lk)("h2",null,"Github",-1)),(0,a.bF)(k,{href:"https://github.com/Snape-max/terminal_art_creator",icon:""},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.eW)("Snape-max/terminal_art_creator")]))),_:1})])),_:1},8,["visible","onOk","onCancel"])]),(0,a.Lk)("div",f,[(0,a.bF)(w,{ref:"PixelCanvas",width:s.canvasWidth,height:s.canvasHeight,"selected-color":s.selectedColor,"pixel-size":s.pixelSize,onChange:g.handleChange},null,8,["width","height","selected-color","pixel-size","onChange"])])])])),_:1})])),_:1})}i(2703),i(1124);function v(e,t,i,n,s,l){const r=(0,a.g2)("a-color-picker");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:s.selectedColor,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedColor=e),defaultValue:"#000000",hideTrigger:"",showPreset:"",onChange:l.handleColorChange},null,8,["modelValue","onChange"])}var p={name:"Palette",data(){return{selectedColor:"#000000"}},methods:{handleColorChange(e){this.$emit("color-selected",e)}}},m=i(26);const C=(0,m.A)(p,[["render",v],["__scopeId","data-v-a55112d6"]]);var x=C,k=i(1036);const b={class:"pixel-canvas"},w={class:"canvas-grid"},y=["onMousedown","onMouseenter","onContextmenu"];function P(e,t,i,s,l,r){return(0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("div",w,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.grid,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"canvas-row"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,((e,i)=>((0,a.uX)(),(0,a.CE)("div",{key:i,style:(0,k.Tr)({backgroundColor:e,outline:"#ffffff00"===e?"1px solid #3f3f3f":"none",width:l.pixelSize+"px",height:l.pixelSize+"px"}),class:"canvas-cell",onMousedown:e=>r.startPainting(t,i),onMouseenter:e=>r.paintIfMouseDown(t,i),onContextmenu:(0,n.D$)((e=>r.startErasing(t,i)),["prevent"])},null,44,y)))),128))])))),128))])])}var L={name:"PixelCanvas",props:{width:{type:Number,required:!0},height:{type:Number,required:!0},selectedColor:{type:String,default:"#FFFFFF"}},data(){return{grid:[],isPainting:!1,isErasing:!1,isCtrlPressed:!1,pixelSize:10}},watch:{width:{immediate:!0,handler(e,t){this.resizeGrid(e,this.height,t,this.height)}},height:{immediate:!0,handler(e,t){this.resizeGrid(this.width,e,this.width,t)}}},methods:{initializeGrid(e,t){this.grid=Array.from({length:t},(()=>Array.from({length:e},(()=>"#ffffff00"))))},resizeGrid(e,t,i,n){n=this.grid.length,i=n>0?this.grid[0].length:0;const s=Array.from({length:t},(()=>Array.from({length:e},(()=>"#ffffff00")))),a=Math.floor((e-i)/2),l=Math.floor((t-n)/2);for(let r=0;r<n;r++)for(let n=0;n<i;n++){const i=r+l,o=n+a;i>=0&&o>=0&&i<t&&o<e&&(s[i][o]=this.grid[r][n])}this.grid=s,this.$nextTick((()=>{this.calculatePixelSize()}))},calculatePixelSize(){if(!this.$el||!this.$el.parentElement)return void console.warn("Canvas container is not available.");const e=this.$el.parentElement,t=e.clientWidth,i=e.clientHeight,n=t/this.width,s=i/this.height;this.pixelSize=Math.min(n,s),this.pixelSize=Math.floor(this.pixelSize)},startPainting(e,t){0===event.button?(this.isPainting=!0,this.isErasing=!1,this.paintCell(e,t)):2===event.button&&(this.isErasing=!0,this.isPainting=!1,this.eraseCell(e,t))},paintIfMouseDown(e,t){this.isPainting||this.isCtrlPressed?this.paintCell(e,t):this.isErasing&&this.eraseCell(e,t)},paintCell(e,t){this.grid[e][t]=this.selectedColor,this.$emit("change")},eraseCell(e,t){this.grid[e][t]="#ffffff00",this.$emit("change")},startErasing(e,t){this.isErasing=!0,this.isPainting=!1,this.eraseCell(e,t)},clearGrid(){this.initializeGrid(this.width,this.height),this.$emit("change")},onKeyDown(e){"Control"===e.key&&(this.isCtrlPressed=!0)},onKeyUp(e){"Control"===e.key&&(this.isCtrlPressed=!1)},hexToRgb(e){if(7===e.length){const t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return[t,i,n]}return[0,0,0]},hexToAlpha(e){return 9===e.length?parseInt(e.slice(7,9),16)/255:1},exportAsTerminalArt(){let e="";for(let t=0;t<this.height;t+=2){for(let i=0;i<this.width;i++){const n=this.grid[t][i],s=t+1<this.height?this.grid[t+1][i]:"#ffffff00",a=this.hexToRgb(n),l=this.hexToAlpha(n),r=this.hexToRgb(s),o=this.hexToAlpha(s);l>0&&o>0?e+=`\\x1b[48;2;${a[0]};${a[1]};${a[2]}m\\x1b[38;2;${r[0]};${r[1]};${r[2]}m▄\\x1b[0m`:0===l&&0===o?e+=" ":0===l?e+=`\\x1b[38;2;${r[0]};${r[1]};${r[2]}m▄\\x1b[0m`:0===o&&(e+=`\\x1b[38;2;${a[0]};${a[1]};${a[2]}m▀\\x1b[0m`)}e+="\\n"}return e=e.slice(0,-2),e}},mounted(){this.initializeGrid(this.width,this.height),this.calculatePixelSize(),document.addEventListener("mouseup",(()=>{this.isPainting=!1,this.isErasing=!1})),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.observer=new ResizeObserver((()=>{this.calculatePixelSize()})),this.$el.parentElement&&this.observer.observe(this.$el.parentElement)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.observer&&this.observer.disconnect()}};const $=(0,m.A)(L,[["render",P],["__scopeId","data-v-6107fb3d"]]);var z=$,E={components:{Palette:x,PixelCanvas:z},data(){return{canvasWidth:16,canvasHeight:16,selectedColor:"#000000",pixelSize:20,hasUnsavedChanges:!1,drewVisible:!1}},methods:{handleColorSelected(e){this.selectedColor=e},handleChange(){this.hasUnsavedChanges=!0},saveCanvas(){const e=JSON.stringify(this.$refs.PixelCanvas.grid);localStorage.setItem("pixelCanvas",e),this.hasUnsavedChanges=!1,this.$message.success("画布已保存！")},exportCanvas(){const e=document.createElement("canvas"),t=e.getContext("2d"),i=this.pixelSize,n=this.canvasWidth*i,s=this.canvasHeight*i;e.width=n,e.height=s,this.$refs.PixelCanvas.grid.forEach(((e,n)=>{e.forEach(((e,s)=>{t.fillStyle=e,t.fillRect(s*i,n*i,i,i)}))}));const a=document.createElement("a");a.href=e.toDataURL("image/png"),a.download="pixel-art.png",a.click()},clearCanvas(){this.$refs.PixelCanvas?(this.$refs.PixelCanvas.clearGrid(),this.hasUnsavedChanges=!0):console.error("PixelCanvas 组件未正确加载")},exportAsTerminalArt(){if(this.$refs.PixelCanvas){const e=this.$refs.PixelCanvas.exportAsTerminalArt();navigator.clipboard.writeText(e).then((()=>{this.$message.success("终端字符画已复制到剪贴板！")})).catch((t=>{console.error("无法复制到剪贴板：",t),this.$message.error("复制失败，请手动复制以下内容：\n\n"+e)}))}else console.error("PixelCanvas 组件未正确加载")},handleClick(){this.drewVisible=!0},handleOk(){this.drewVisible=!1},handleCancel(){this.drewVisible=!1}},mounted(){this.$nextTick((()=>{if(this.$refs.PixelCanvas){const e=localStorage.getItem("pixelCanvas");if(e){const t=JSON.parse(e);this.$refs.PixelCanvas.grid=t,this.canvasWidth=t.length,this.canvasHeight=t[0].length}}})),window.addEventListener("beforeunload",(e=>{if(this.hasUnsavedChanges){e.preventDefault(),e.returnValue="";const t=confirm("您有未保存的更改，是否导出当前画布？");t&&this.exportCanvas()}}))},beforeDestroy(){window.removeEventListener("beforeunload",this.promptBeforeUnload)}};const S=(0,m.A)(E,[["render",g]]);var F=S;i(6399);const _=(0,n.Ef)(F);_.use(s.A),_.mount("#app")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,a){if(!n){var l=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],a=e[c][2];for(var r=!0,o=0;o<n.length;o++)(!1&a||l>=a)&&Object.keys(i.O).every((function(e){return i.O[e](n[o])}))?n.splice(o--,1):(r=!1,a<l&&(l=a));if(r){e.splice(c--,1);var h=s();void 0!==h&&(t=h)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,s,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,l=n[0],r=n[1],o=n[2],h=0;if(l.some((function(t){return 0!==e[t]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(o)var c=o(i)}for(t&&t(n);h<l.length;h++)a=l[h],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(c)},n=self["webpackChunkterminal_art_creator"]=self["webpackChunkterminal_art_creator"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(3450)}));n=i.O(n)})();
//# sourceMappingURL=app.dc161779.js.map