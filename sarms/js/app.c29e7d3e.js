(function(){"use strict";var e={6802:function(e,t,a){var l=a(5130),r=a(6768);function i(e,t){const a=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(a)}var s=a(1241);const o={},n=(0,s.A)(o,[["render",i]]);var u=n,d=a(1387),c=a(4232);const g={class:"home"},m=["src"],h={key:0,class:"title"},p={class:"header"},b={class:"dialog-footer"};function f(e,t,a,l,i,s){const o=(0,r.g2)("el-menu-item"),n=(0,r.g2)("el-divider"),u=(0,r.g2)("DataBoard"),d=(0,r.g2)("el-icon"),f=(0,r.g2)("UploadFilled"),k=(0,r.g2)("PictureFilled"),v=(0,r.g2)("el-menu"),_=(0,r.g2)("el-aside"),F=(0,r.g2)("el-button"),y=(0,r.g2)("el-breadcrumb-item"),w=(0,r.g2)("el-breadcrumb"),I=(0,r.g2)("Search"),L=(0,r.g2)("el-date-picker"),S=(0,r.g2)("el-form-item"),C=(0,r.g2)("el-input"),x=(0,r.g2)("el-option"),D=(0,r.g2)("el-select"),E=(0,r.g2)("el-form"),V=(0,r.g2)("el-dialog"),T=(0,r.g2)("router-view"),A=(0,r.g2)("el-main"),$=(0,r.g2)("el-container");return(0,r.uX)(),(0,r.CE)("div",g,[(0,r.bF)($,{style:{height:"100vh"}},{default:(0,r.k6)((()=>[(0,r.bF)($,null,{default:(0,r.k6)((()=>[(0,r.bF)(_,{width:i.isCollapsed?"60px":"150px",class:"sidebar","close-on-click-outside":"true"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{collapse:i.isCollapsed,router:!0,"default-active":"upload",class:"menu"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{onClick:s.goToIndex},{default:(0,r.k6)((()=>[(0,r.Lk)("img",{src:i.logo,alt:"Logo",class:"logo"},null,8,m),i.isCollapsed?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("h1",h,"SARMS"))])),_:1},8,["onClick"]),(0,r.bF)(n,{style:{margin:"0","border-color":"#222c30",transition:"0s"}}),(0,r.bF)(o,{index:"/home/dashboard"},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(u)])),_:1}),t[6]||(t[6]=(0,r.Lk)("span",{slot:"title"},"数据统计",-1))])),_:1}),(0,r.bF)(o,{index:"/home/upload"},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(f)])),_:1}),t[7]||(t[7]=(0,r.Lk)("span",{slot:"title"},"图片上传",-1))])),_:1}),(0,r.bF)(o,{index:"/home/browse"},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(k)])),_:1}),t[8]||(t[8]=(0,r.Lk)("span",{slot:"title"},"图片浏览",-1))])),_:1})])),_:1},8,["collapse"])])),_:1},8,["width"]),(0,r.bF)(A,{class:"el-main"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",p,[(0,r.bF)(F,{onClick:s.toggleSidebar,style:{"margin-right":"10px"},circle:""},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.Lk)("svg",{"data-v-49e15297":"",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",class:"hamburger"},[(0,r.Lk)("path",{"data-v-49e15297":"",d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"})],-1)]))),_:1},8,["onClick"]),(0,r.bF)(w,{separator:"/"},{default:(0,r.k6)((()=>[(0,r.bF)(y,{to:"/home/dashboard"},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.eW)("首页")]))),_:1}),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.breadcrumbItems,(e=>((0,r.uX)(),(0,r.Wv)(y,{key:e.path,to:e.path},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(e.name),1)])),_:2},1032,["to"])))),128))])),_:1}),(0,r.bF)(F,{size:"large",onClick:t[0]||(t[0]=e=>i.searchDialogVisible=!0),style:{"margin-right":"20px",right:"0",position:"absolute"},circle:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(I)])),_:1})])),_:1})]),(0,r.bF)(V,{modelValue:i.searchDialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>i.searchDialogVisible=e),title:"图片检索",width:"800"},{footer:(0,r.k6)((()=>[(0,r.Lk)("span",b,[(0,r.bF)(F,{onClick:s.cancelSearch},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("取 消")]))),_:1},8,["onClick"]),(0,r.bF)(F,{type:"primary",onClick:s.performSearch},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("检 索")]))),_:1},8,["onClick"])])])),default:(0,r.k6)((()=>[(0,r.bF)(E,{inline:!0,model:i.searchForm,class:"demo-form-inline"},{default:(0,r.k6)((()=>[(0,r.bF)(S,{label:"开始日期"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{modelValue:i.searchForm.startDate,"onUpdate:modelValue":t[1]||(t[1]=e=>i.searchForm.startDate=e),type:"datetime",placeholder:"选择开始日期时间"},null,8,["modelValue"])])),_:1}),(0,r.bF)(S,{label:"结束日期"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{modelValue:i.searchForm.endDate,"onUpdate:modelValue":t[2]||(t[2]=e=>i.searchForm.endDate=e),type:"datetime",placeholder:"选择结束日期时间"},null,8,["modelValue"])])),_:1}),(0,r.bF)(S,{label:"文件名"},{default:(0,r.k6)((()=>[(0,r.bF)(C,{modelValue:i.searchForm.fileName,"onUpdate:modelValue":t[3]||(t[3]=e=>i.searchForm.fileName=e),placeholder:"请输入文件名"},null,8,["modelValue"])])),_:1}),(0,r.bF)(S,{label:"标签"},{default:(0,r.k6)((()=>[(0,r.bF)(D,{modelValue:i.searchForm.tags,"onUpdate:modelValue":t[4]||(t[4]=e=>i.searchForm.tags=e),multiple:"",placeholder:"请选择标签",style:{width:"200px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.availableTags,(e=>((0,r.uX)(),(0,r.Wv)(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,r.bF)(T)])),_:1})])),_:1})])),_:1})])}a(4114),a(8992),a(4520),a(1454);var k={name:"HomeView",data(){return{isCollapsed:!1,logo:a(3153),searchDialogVisible:!1,searchDialogVisible:!1,searchForm:{startDate:"",endDate:"",fileName:"",tags:[]},availableTags:[{value:"ship",label:"ship"},{value:"aircraft",label:"aircraft"},{value:"car",label:"car"},{value:"tank",label:"tank"},{value:"bridge",label:"bridge"},{value:"harbor",label:"harbor"}]}},computed:{breadcrumbItems(){const e=this.$route.matched.filter((e=>e.meta&&e.meta.title));return"image"===this.$route.name?[{path:"/home/browse",name:"图片浏览"},{path:`/home/browse/${this.$route.params.id}`,name:"详细信息"}]:e.map((e=>({path:e.path,name:e.meta.title})))}},methods:{toggleSidebar(){this.isCollapsed=!this.isCollapsed},performSearch(){const e={start_date:this.searchForm.startDate?this.searchForm.startDate.toISOString().slice(0,-1):"",end_date:this.searchForm.endDate?this.searchForm.endDate.toISOString().slice(0,-1):"",name:this.searchForm.fileName,tags:this.searchForm.tags.join(",")};this.$router.push({name:"browse",query:e}),this.searchDialogVisible=!1},cancelSearch(){this.searchForm={startDate:"",endDate:"",fileName:"",tags:[]},this.searchDialogVisible=!1},goToIndex(){this.$router.push({path:"/"})}}};const v=(0,s.A)(k,[["render",f],["__scopeId","data-v-ae1fe1e8"]]);var _=v;const F={class:"auth-container"},y={class:"card-header"},w={class:"toggle-link"};function I(e,t,a,l,i,s){const o=(0,r.g2)("el-input"),n=(0,r.g2)("el-form-item"),u=(0,r.g2)("el-button"),d=(0,r.g2)("el-form"),g=(0,r.g2)("el-text"),m=(0,r.g2)("el-link"),h=(0,r.g2)("el-card");return(0,r.uX)(),(0,r.CE)("div",F,[(0,r.bF)(h,{class:"box-card"},{header:(0,r.k6)((()=>[(0,r.Lk)("div",y,[(0,r.Lk)("span",null,"系统"+(0,c.v_)(l.isLogin?"登录":"注册"),1)])])),default:(0,r.k6)((()=>[(0,r.bF)(d,{model:l.authForm,rules:l.rules,ref:"authFormRef","label-position":"right"},{default:(0,r.k6)((()=>[l.isLogin?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(n,{key:0,label:"用户名",prop:"username"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{modelValue:l.authForm.username,"onUpdate:modelValue":t[0]||(t[0]=e=>l.authForm.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1})),(0,r.bF)(n,{label:"邮箱",prop:"email"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{modelValue:l.authForm.email,"onUpdate:modelValue":t[1]||(t[1]=e=>l.authForm.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1}),(0,r.bF)(n,{label:"密码",prop:"password"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{modelValue:l.authForm.password,"onUpdate:modelValue":t[2]||(t[2]=e=>l.authForm.password=e),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),l.isLogin?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(n,{key:1,label:"确认密码",prop:"confirmPassword"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{modelValue:l.authForm.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>l.authForm.confirmPassword=e),type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])])),_:1})),(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(u,{type:"primary",onClick:l.handleSubmit,class:"auth-btn"},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(l.isLogin?"登录":"注册"),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),(0,r.Lk)("div",w,[(0,r.bF)(g,{class:"mx-1"},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(l.isLogin?"没有账号？请":"已有账号？请"),1)])),_:1}),(0,r.bF)(m,{type:"primary",onClick:l.toggleForm},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(l.isLogin?"注册":"登录"),1)])),_:1},8,["onClick"])])])),_:1})])}var L=a(144),S=a(782),C=a(1219),x={name:"AuthView",setup(){const e=(0,S.Pj)(),t=(0,d.rd)(),a=(0,L.KR)(null),l=(0,L.KR)(!0),r=(0,L.KR)({username:"",email:"",password:"",confirmPassword:""}),i=(e,t,a)=>{t!==r.value.password?a(new Error("两次输入的密码不一致")):a()},s=(0,L.KR)({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度应在6到20个字符之间",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:i,trigger:"blur"}]}),o=()=>{a.value.validate((async a=>{if(!a)return C.nk.error("请填写所有字段"),!1;try{let a;l.value?(a=await e.dispatch("login",{email:r.value.email,password:r.value.password}),a?(console.log(a),C.nk.error(a)):(t.push({name:"dashboard"}),C.nk.success("登录成功"))):(a=await e.dispatch("register",{username:r.value.username,email:r.value.email,password:r.value.password}),a?C.nk.error(a):(C.nk.success("注册成功"),l.value=!0))}catch(i){C.nk.error(l.value?"登录失败":"注册失败")}}))},n=()=>{l.value=!l.value,r.value={username:"",email:"",password:"",confirmPassword:""}};return{authForm:r,rules:s,authFormRef:a,isLogin:l,handleSubmit:o,toggleForm:n}}};const D=(0,s.A)(x,[["render",I],["__scopeId","data-v-38abeca7"]]);var E=D;const V={class:"browse"},T=["src","id","onClick"],A=["onClick"],$={key:0},X={class:"pagination-container"},O={class:"floating-action-button"},W={class:"options"};function z(e,t,a,l,i,s){const o=(0,r.g2)("el-card"),n=(0,r.g2)("el-col"),u=(0,r.g2)("el-row"),d=(0,r.g2)("Loading"),g=(0,r.g2)("el-icon"),m=(0,r.g2)("el-result"),h=(0,r.g2)("el-pagination"),p=(0,r.g2)("Setting"),b=(0,r.g2)("el-button"),f=(0,r.g2)("Delete"),k=(0,r.g2)("Edit"),v=(0,r.g2)("Top"),_=(0,r.g2)("el-popover");return(0,r.uX)(),(0,r.CE)("div",V,[(0,r.bF)(u,{gutter:20,style:{"padding-bottom":"10px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.paginatedImages,((e,t)=>((0,r.uX)(),(0,r.Wv)(n,{span:4,key:t,style:{"padding-bottom":"10px"}},{default:(0,r.k6)((()=>[(0,r.bF)(o,{"body-style":{padding:"0px"}},{default:(0,r.k6)((()=>[(0,r.Lk)("img",{src:e.img_url,class:"image",id:e.id,onClick:t=>s.viewImageDetail(e)},null,8,T),(0,r.Lk)("div",{onClick:t=>s.toggleImageSelection(e),class:(0,c.C4)({selected:s.isImageSelected(e)}),style:{padding:"14px","font-size":"14px",cursor:"pointer"}},[(0,r.Lk)("span",null,(0,c.v_)(e.img_name),1)],10,A)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0==i.images.length?((0,r.uX)(),(0,r.CE)("div",$,[(0,r.bF)(m,{title:"暂无图片","sub-title":"暂无图片，或正在检索"},{icon:(0,r.k6)((()=>[(0,r.bF)(g,{class:"large-icon"},{default:(0,r.k6)((()=>[(0,r.bF)(d)])),_:1})])),_:1})])):(0,r.Q3)("",!0),(0,r.Lk)("div",X,[i.images.length>0?((0,r.uX)(),(0,r.Wv)(h,{key:0,background:"",layout:"prev, pager, next",total:i.images.length,"page-size":i.pageSize,onCurrentChange:s.handlePageChange},null,8,["total","page-size","onCurrentChange"])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",O,[(0,r.bF)(_,{placement:"top",width:"180",trigger:"hover",onShow:s.onShow,onHide:s.onHide},{reference:(0,r.k6)((()=>[(0,r.bF)(b,{type:"primary",color:"#56799c",size:"large",circle:""},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(p)])),_:1})])),_:1})])),default:(0,r.k6)((()=>[(0,r.Lk)("div",W,[(0,r.bF)(b,{type:"danger",size:"large",onClick:t[0]||(t[0]=e=>s.deleteSelectedImages()),circle:""},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(f)])),_:1})])),_:1}),(0,r.bF)(b,{type:"warning",size:"large",onClick:t[1]||(t[1]=e=>s.renameImage()),circle:""},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(k)])),_:1})])),_:1}),(0,r.bF)(b,{type:"success",size:"large",onClick:t[2]||(t[2]=e=>s.scrollToTop()),circle:""},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(v)])),_:1})])),_:1})])])),_:1},8,["onShow","onHide"])])])}a(3949),a(7550);var U=a(813),P=a(2933),B=a(7477);let j={ship:"rgb(255, 157, 226)",aircraft:"rgb(140, 130, 252)",car:"rgb(182, 147, 254)",tank:"rgb(126, 255, 219)",bridge:"rgb(255, 211, 182)",harbor:"rgb(245, 113, 112)"};const q={apiUrl:"https://sarms-api.catfun.fun",CATEGORIES_COLOR:j};var N=q,M=a(4373);const H=N.apiUrl;var R={login:e=>M.A.post(`${H}/login`,e),register:e=>M.A.post(`${H}/register`,e),query:(e,t)=>M.A.post(`${H}/query`,null,{params:e,headers:{"x-access-token":t}}),modeify:(e,t)=>M.A.post(`${H}/modify`,null,{params:e,headers:{"x-access-token":t}}),info:e=>M.A.post(`${H}/info`,null,{headers:{"x-access-token":e}})},K={name:"BrowseView",components:{ElIcon:U.tk,Loading:B.Loading,Setting:B.Setting,Delete:B.Delete,Edit:B.Edit,Top:B.Top},data(){return{images:[],selectedImages:[],token:sessionStorage.getItem("token"),showOptions:!1,currentPage:1,pageSize:24}},created(){this.fetchImages()},computed:{paginatedImages(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.images.slice(e,t)}},watch:{"$route.query":{handler:"fetchImages",immediate:!0}},methods:{async fetchImages(){let e={};this.$route.query&&(e=this.$route.query);try{const t=await R.query(e,this.token);this.images=t.data.map((e=>({id:e.id,img_url:`${N.apiUrl}/${e.img_url}`,img_name:e.img_name,img_date:e.img_date})))}catch(t){console.error("Error fetching images:",t),this.images=[{id:"default",img_url:a(3153),img_name:"Error Loading Images"}]}},handlePageChange(e){this.currentPage=e},toggleImageSelection(e){this.isImageSelected(e)?this.selectedImages=this.selectedImages.filter((t=>t.id!==e.id)):this.selectedImages.push(e)},isImageSelected(e){return this.selectedImages.some((t=>t.id===e.id))},deleteSelectedImages(){0!==this.selectedImages.length?P.s.confirm("确定要删除选中的图片吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.selectedImages.forEach((e=>{this.deleteImage(e)})),this.selectedImages=[]})).catch((()=>{C.nk.info("删除取消"),this.selectedImages=[]})):C.nk.warning("请选择要删除的图片")},renameImage(){if(0===this.selectedImages.length)return void C.nk.warning("请选择要重命名的图片");if(this.selectedImages.length>1)return C.nk.warning("只能选择一张图片进行重命名"),void(this.selectedImages=[]);const e=this.selectedImages[0];P.s.prompt("请输入新的图片名称","重命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[a-zA-Z0-9\u4e00-\u9fa5\s\.]+$/,inputErrorMessage:"图片名称不能包含特殊字符"}).then((({value:t})=>{t&&this.renameImageOnServer(e,t)})).catch((()=>{C.nk.info("重命名取消"),this.selectedImages=[]}))},renameImageOnServer(e,t){const a={id:e.id,rename:t};R.modeify(a,this.token).then((e=>{C.nk.success("图片重命名成功"),this.fetchImages(),this.selectedImages=[]})).catch((e=>{console.error("Error renaming image:",e),C.nk.error("图片重命名失败")}))},deleteImage(e){const t={id:e.id,delete:"true"};R.modeify(t,this.token).then((e=>{C.nk.success("图片删除成功"),this.fetchImages()})).catch((e=>{console.error("Error deleting image:",e),C.nk.error("图片删除失败")}))},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},onShow(){this.showOptions=!0},onHide(){this.showOptions=!1},viewImageDetail(e){this.$router.push({name:"image",params:{id:e.id}})}}};const Q=(0,s.A)(K,[["render",z],["__scopeId","data-v-51156346"]]);var Z=Q;const G={class:"upload"};function Y(e,t,a,l,i,s){const o=(0,r.g2)("el-upload");return(0,r.uX)(),(0,r.CE)("div",G,[t[1]||(t[1]=(0,r.Lk)("br",null,null,-1)),t[2]||(t[2]=(0,r.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,r.Lk)("br",null,null,-1)),t[4]||(t[4]=(0,r.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,r.Lk)("br",null,null,-1)),t[6]||(t[6]=(0,r.Lk)("br",null,null,-1)),t[7]||(t[7]=(0,r.Lk)("br",null,null,-1)),t[8]||(t[8]=(0,r.Lk)("h1",null,"图片上传",-1)),(0,r.bF)(o,{class:"upload-demo",drag:"",action:i.uploadUrl,headers:i.headers,"before-upload":s.beforeUpload,"on-success":s.handleSuccess,"on-error":s.handleError,multiple:""},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("i",{class:"el-icon-upload"},null,-1),(0,r.Lk)("div",{class:"el-upload__text"},[(0,r.eW)("将文件拖到此处，或"),(0,r.Lk)("em",null,"点击上传")],-1),(0,r.Lk)("div",{class:"el-upload__tip",slot:"tip"},"只能上传jpg/png文件",-1)]))),_:1},8,["action","headers","before-upload","on-success","on-error"])])}var J={name:"UploadView",data(){return{headers:{"x-access-token":sessionStorage.getItem("token")},uploadUrl:N.apiUrl+"/upload"}},methods:{beforeUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type;return t||C.nk.error("只能上传jpg/png文件!"),t},handleSuccess(e,t,a){C.nk.success("文件上传成功！")},handleError(e,t,a){C.nk.error("文件上传失败！")}}};const ee=(0,s.A)(J,[["render",Y],["__scopeId","data-v-f83c93de"]]);var te=ee;const ae={class:"dashboard-container"},le={ref:"imageNumByDateChart",class:"chart upper-chart"},re={class:"charts-row"},ie={ref:"tagFreqChart",class:"chart lower-left-chart"},se={ref:"labelStatusChart",class:"chart lower-right-chart"};function oe(e,t,a,l,i,s){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",ae,[(0,r.Lk)("div",le,null,512),(0,r.Lk)("div",re,[(0,r.Lk)("div",ie,null,512),(0,r.Lk)("div",se,null,512)])])])}var ne=a(9671),ue={name:"Dashboard",data(){return{imageNumByDate:null,tagFreq:null,unlabeledImagePercentage:null,totalImageNum:null,imageNumByDateChart:null,tagFreqChart:null,labelStatusChart:null,token:sessionStorage.getItem("token")}},mounted(){this.fetchData()},methods:{async fetchData(){try{const e=await R.info(this.token);this.imageNumByDate=e.data.image_num_by_date.sort(((e,t)=>new Date(e.date)-new Date(t.date))),this.tagFreq=e.data.tag_freq,this.unlabeledImagePercentage=e.data.unlabeled_image_percentage,this.totalImageNum=e.data.total_image_num;const t=Math.round(this.totalImageNum*(1-this.unlabeledImagePercentage/100)),a=this.totalImageNum-t;this.initLabelStatusChart(t,a),this.initCharts()}catch(e){console.error("Error fetching data:",e)}},initCharts(){this.imageNumByDateChart=ne.Ts(this.$refs.imageNumByDateChart),this.imageNumByDateChart.setOption({title:{text:"近十天图像上传数量",left:"center"},xAxis:{type:"category",data:this.imageNumByDate.map((e=>e.date))},yAxis:{type:"value"},series:[{data:this.imageNumByDate.map((e=>e.count)),type:"line"}]}),this.tagFreqChart=ne.Ts(this.$refs.tagFreqChart),this.tagFreqChart.setOption({title:{text:"各类标签频率",left:"center"},tooltip:{trigger:"item"},series:[{name:"Tags",type:"pie",radius:"50%",data:this.tagFreq.map((e=>({value:e.frequency,name:e.name}))),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},initLabelStatusChart(e,t){this.$refs.labelStatusChart&&(this.labelStatusChart=ne.Ts(this.$refs.labelStatusChart),this.labelStatusChart.setOption({title:{text:"已标签和未标签图片比例",left:"center"},tooltip:{trigger:"item"},series:[{name:"Label Status",type:"pie",radius:"50%",data:[{value:e,name:"已标签"},{value:t,name:"未标签"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))}}};const de=(0,s.A)(ue,[["render",oe],["__scopeId","data-v-27c81c0f"]]);var ce=de;const ge={key:0},me={key:1,class:"info-container"},he={key:2},pe={key:1};function be(e,t,a,l,i,s){const o=(0,r.g2)("el-image"),n=(0,r.g2)("el-divider"),u=(0,r.g2)("el-descriptions-item"),d=(0,r.g2)("el-tag"),g=(0,r.g2)("el-descriptions"),m=(0,r.g2)("el-button");return i.imageDetail?((0,r.uX)(),(0,r.CE)("div",ge,[(0,r.bF)(o,{style:{width:"256px",height:"256px"},src:i.imageDetail.img_url,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[i.imageDetail.img_url],"initial-index":4,onLoad:s.onImageLoad,fit:"cover"},null,8,["src","preview-src-list","onLoad"]),s.getSrcList().length>1?((0,r.uX)(),(0,r.Wv)(o,{key:0,style:{width:"256px",height:"256px"},src:i.imageDetail.labeled_img_url,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[i.imageDetail.labeled_img_url],"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])):(0,r.Q3)("",!0),(0,r.bF)(n),i.imageDetail?((0,r.uX)(),(0,r.CE)("div",me,[(0,r.bF)(g,{direction:"vertical",column:4,size:e.large,border:""},{default:(0,r.k6)((()=>[(0,r.bF)(u,{label:"文件名"},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(i.imageDetail.img_name),1)])),_:1}),(0,r.bF)(u,{label:"上传时间",span:2},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(s.formatDateTime(i.imageDetail.img_date)),1)])),_:1}),i.imageSize?((0,r.uX)(),(0,r.Wv)(u,{key:0,label:"图片尺寸"},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(i.imageSize.width)+" x "+(0,c.v_)(i.imageSize.height)+" px",1)])),_:1})):(0,r.Q3)("",!0),(0,r.bF)(u,{label:"标签",span:2},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.imageDetail.tags,(e=>((0,r.uX)(),(0,r.Wv)(d,{color:i.color[e],effect:"dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(e)+" * "+(0,c.v_)(i.tags[e]),1)])),_:2},1032,["color"])))),256)),!1===i.isLabel?((0,r.uX)(),(0,r.Wv)(d,{key:0,color:"black",effect:"dark"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)(" 暂无 ")]))),_:1})):(0,r.Q3)("",!0)])),_:1}),(0,r.bF)(u,{label:"上传者"},{default:(0,r.k6)((()=>[(0,r.eW)((0,c.v_)(i.imageDetail.author),1)])),_:1})])),_:1},8,["size"])])):(0,r.Q3)("",!0),(0,r.bF)(n),i.imageDetail?((0,r.uX)(),(0,r.CE)("div",he,[(0,r.bF)(m,{type:"primary",onClick:t[0]||(t[0]=e=>s.renameImage())},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("重命名")]))),_:1}),(0,r.bF)(m,{type:"danger",onClick:t[1]||(t[1]=e=>s.deleteImage())},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("删除")]))),_:1})])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",pe,t[5]||(t[5]=[(0,r.Lk)("p",null,"加载中...",-1)])))}var fe={name:"ImageView",data(){return{imageDetail:null,token:sessionStorage.getItem("token"),imageSize:null,color:N.CATEGORIES_COLOR,tags:null,isLabel:!0}},created(){this.loadImageDetail()},methods:{async loadImageDetail(){const e=this.$route.params.id;try{const t={id:e},a=await R.query(t,this.token);null==a.data[0].labeled_image_url&&(this.isLabel=!1),this.tags=a.data[0].tags,this.imageDetail={id:a.data[0].id,img_url:`${N.apiUrl}/${a.data[0].img_url}`,img_name:a.data[0].img_name,img_date:a.data[0].img_date,labeled_img_url:`${N.apiUrl}/${a.data[0].labeled_image_url}`,author:a.data[0].author,tags:Object.keys(a.data[0].tags)},console.log(this.imageDetail.tags)}catch(t){console.error("Error loading image detail:",t)}},onImageLoad(e){const t=e.target;this.imageSize={width:t.naturalWidth,height:t.naturalHeight}},goBack(){this.$router.push({name:"browse"})},formatDateTime(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return`${a}-${l}-${r} ${i}:${s}:${o}`},getSrcList(){let e=[this.imageDetail.img_url,this.imageDetail.labeled_img_url];return this.imageDetail.labeled_img_url===`${N.apiUrl}/null`&&(e=[this.imageDetail.img_url]),e},renameImage(){P.s.prompt("请输入新的图片名称","重命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[a-zA-Z0-9\u4e00-\u9fa5\s\.]+$/,inputErrorMessage:"图片名称不能包含特殊字符"}).then((({value:e})=>{if(e){const t={id:this.imageDetail.id,rename:e};R.modeify(t,this.token).then((e=>{C.nk.success("图片重命名成功"),this.loadImageDetail()})).catch((e=>{console.error("Error renaming image:",e),C.nk.error("图片重命名失败")}))}})).catch((()=>{C.nk.info("重命名取消")}))},deleteImage(){P.s.confirm("确定要删除选中的图片吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e={id:this.imageDetail.id,delete:"true"};R.modeify(e,this.token).then((e=>{C.nk.success("图片删除成功"),this.goBack()})).catch((e=>{console.error("Error deleting image:",e),C.nk.error("图片删除失败")}))})).catch((()=>{C.nk.info("删除取消")}))}}};const ke=(0,s.A)(fe,[["render",be],["__scopeId","data-v-3e9cf2b2"]]);var ve=ke,_e=a(3153);const Fe={id:"app"},ye={class:"hero"},we={class:"hero-content"},Ie={class:"features"},Le={class:"content-overlay"},Se={class:"feature-list"},Ce={class:"partners"},xe=["src"],De={style:{padding:"0px"}};function Ee(e,t,a,l,i,s){const o=(0,r.g2)("el-menu-item"),n=(0,r.g2)("el-menu"),u=(0,r.g2)("el-row"),d=(0,r.g2)("el-header"),g=(0,r.g2)("el-button"),m=(0,r.g2)("el-card"),h=(0,r.g2)("el-carousel-item"),p=(0,r.g2)("el-carousel"),b=(0,r.g2)("el-col");return(0,r.uX)(),(0,r.CE)("div",Fe,[(0,r.bF)(d,{class:"header"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{type:"flex",justify:"space-between",align:"middle"},{default:(0,r.k6)((()=>[t[2]||(t[2]=(0,r.Lk)("div",{class:"logo"},[(0,r.Lk)("img",{src:_e,alt:"Logo"}),(0,r.Lk)("span",null,[(0,r.Lk)("strong",null,"遥感图像信息管理系统")])],-1)),(0,r.bF)(n,{mode:"horizontal",router:!0},{default:(0,r.k6)((()=>[(0,r.bF)(o,{index:"/home/dashboard"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.eW)("进入控制台")]))),_:1}),(0,r.bF)(o,{index:"/auth"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("登录注册")]))),_:1})])),_:1})])),_:1})])),_:1}),(0,r.Lk)("section",ye,[(0,r.Lk)("div",we,[t[4]||(t[4]=(0,r.Lk)("h1",null,"SAR Management System",-1)),t[5]||(t[5]=(0,r.Lk)("p",null,"基于 Vue 3 + Flask，面向研究所和高校的遥感图像管理系统",-1)),t[6]||(t[6]=(0,r.Lk)("br",null,null,-1)),(0,r.bF)(g,{type:"primary",size:"large",onClick:s.goToHome},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("Get Started")]))),_:1},8,["onClick"])])]),(0,r.Lk)("section",Ie,[t[7]||(t[7]=(0,r.Lk)("h2",null,"Our Features",-1)),(0,r.bF)(p,{interval:4e3,type:"card",motion_blur:"true",arrow:"always"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.features,((e,t)=>((0,r.uX)(),(0,r.Wv)(h,{key:t},{default:(0,r.k6)((()=>[(0,r.bF)(m,{shadow:"hover",style:(0,c.Tr)({height:"100%",backgroundImage:`url(${e.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",backgroundColor:e.color}),class:"feature-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Le,[(0,r.Lk)("h3",null,(0,c.v_)(e.title),1),(0,r.Lk)("ul",Se,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.description,((e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:t},(0,c.v_)(e),1)))),128))])])])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1})]),t[9]||(t[9]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("section",Ce,[t[8]||(t[8]=(0,r.Lk)("h2",null,"Our Partners",-1)),(0,r.bF)(u,{gutter:20,justify:"center"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.partners,((e,t)=>((0,r.uX)(),(0,r.Wv)(b,{span:6,key:t},{default:(0,r.k6)((()=>[(0,r.bF)(m,{shadow:"hover",class:"partner-card"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{type:"flex",align:"middle"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{span:8},{default:(0,r.k6)((()=>[(0,r.Lk)("img",{src:e.logo,alt:"Partner Logo",class:"partner-logo"},null,8,xe)])),_:2},1024),(0,r.bF)(b,{span:16},{default:(0,r.k6)((()=>[(0,r.Lk)("div",De,[(0,r.Lk)("h3",null,(0,c.v_)(e.name),1),(0,r.Lk)("p",null,(0,c.v_)(e.description),1)])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),t[10]||(t[10]=(0,r.Lk)("br",null,null,-1)),t[11]||(t[11]=(0,r.Lk)("footer",{class:"footer"},[(0,r.Lk)("div",{class:"footer-content"},[(0,r.Lk)("p",null,"© 2024 Pengwei Wang&Wending Zhao. All rights reserved.")])],-1))])}var Ve=a(4880),Te=a(4418),Ae=a(4182),$e=a(47),Xe=a(683),Oe=a(7962),We={name:"IndexView",components:{ElHeader:Ve.bZ,ElRow:Te.S2,ElMenu:Ae.lj,ElMenuItem:Ae.ct,ElButton:$e.S2,ElCard:Xe.Ik,ElCol:Oe.uD},data(){return{features:[{title:"强大的数据统计功能",description:["直观展示最近十天内用户上传图片的数量变化趋势，帮助管理员了解系统的活跃度。","提供图像中各类目标的详细分布情况，便于评估系统在不同应用场景下的表现。","清晰显示已标注和未标注图片的比例，便于追踪标注进度。"],backgroundImage:a(6716)},{title:"高效便捷的图片管理",description:["简化多张图片上传流程，提升工作效率。","基于日期、图片名称和标签进行快速检索，确保用户能够轻松找到所需图片。","提供重命名和删除功能，保持资料库的整洁有序。"],backgroundImage:a(1977)},{title:"详细的图片浏览体验",description:["一目了然地查看所有已上传图片，方便用户快速浏览。","每张图片都附带详细的元数据，包括文件名、上传时间、尺寸、内部目标及其数量、上传人信息等，满足深度分析需求。"],backgroundImage:a(2382)},{title:"安全可靠的数据保护",description:["采用Token机制确保每次请求的安全性，防止未授权访问。","利用Flask构建稳定可靠的后端服务，结合Vue.js与Element Plus打造响应迅速、用户体验友好的前端界面。","通过合理的项目结构设计和文档指导，使得部署过程变得简单快捷。"],backgroundImage:a(6716)},{title:"易于使用且高度定制化",description:["遵循Material Design原则设计的UI/UX，确保系统不仅美观而且易于上手。","无论是界面布局还是功能模块，都可以根据实际业务需求进行调整，以适应不同的工作流和应用场景。"],backgroundImage:a(1977)}],partners:[{name:"国防科技大学",description:"National University of Defense Technology.",logo:a(6765)},{name:"信息支援部队",description:"Information Support Troops.",logo:a(4159)}]}},methods:{goToHome(){this.$router.push({path:"/home/dashboard"})}}};const ze=(0,s.A)(We,[["render",Ee],["__scopeId","data-v-707c1df3"]]);var Ue=ze,Pe=(0,S.y$)({state:{isAuthenticated:"true"===sessionStorage.getItem("isAuthenticated"),user:sessionStorage.getItem("user")||null},mutations:{setAuthenticated(e,t){e.isAuthenticated=t,sessionStorage.setItem("isAuthenticated",t)},setUser(e,t){e.user=t,sessionStorage.setItem("user",t)},setToken(e,t){e.token=t,sessionStorage.setItem("token",t)}},actions:{async login({commit:e},t){try{const a=await R.login(t);if("success"!==a.data.status)return a.data.msg;e("setAuthenticated",!0),e("setUser",a.data.user),e("setToken",a.data.token)}catch(a){throw console.log(a),new Error(a)}},async register({commit:e},t){try{const a=await R.register(t);if("success"!==a.data.status)return a.data.msg;e("setAuthenticated",!0)}catch(a){throw new Error("Registration failed")}},logout({commit:e}){e("setAuthenticated",!1),e("setUser",null)}},getters:{isAuthenticated:e=>e.isAuthenticated,user:e=>e.user}});const Be=[{path:"/",name:"index",component:Ue},{path:"/home",name:"home",component:_,children:[{path:"browse",name:"browse",component:Z,meta:{title:"图片浏览"}},{path:"browse/:id",name:"image",component:ve,meta:{title:"图片详情"}},{path:"upload",name:"upload",component:te,meta:{title:"图片上传"}},{path:"dashboard",name:"dashboard",component:ce,meta:{title:"数据统计"}}]},{path:"/auth",name:"auth",component:E}],je=(0,d.aE)({history:(0,d.LA)("/sarms/"),routes:Be});je.beforeEach(((e,t,a)=>{"home"===e.name&&a({name:"dashboard"}),"home"===e.name||"browse"===e.name||"upload"===e.name||"dashboard"===e.name?Pe.state.isAuthenticated?a():a({name:"auth"}):"auth"===e.name?(console.log("isAuthenticated:",Pe.state.isAuthenticated),Pe.state.isAuthenticated?a({name:"home"}):a()):a()}));var qe=je,Ne=a(4387);a(4188);const Me=(0,l.Ef)(u);for(const[He,Re]of Object.entries(B))Me.component(He,Re);Me.use(Pe),Me.use(qe),Me.use(Ne.A),Me.mount("#app")},6716:function(e,t,a){e.exports=a.p+"img/0.9d51020a.jpg"},1977:function(e,t,a){e.exports=a.p+"img/1.eae7029b.jpg"},2382:function(e,t,a){e.exports=a.p+"img/2.682a9e4b.jpg"},3153:function(e,t,a){e.exports=a.p+"img/logo.840c1ed6.png"},4159:function(e,t,a){e.exports=a.p+"img/81.281aaf33.png"},6765:function(e,t,a){e.exports=a.p+"img/nudt.f1fc668a.png"}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,i){if(!l){var s=1/0;for(d=0;d<e.length;d++){l=e[d][0],r=e[d][1],i=e[d][2];for(var o=!0,n=0;n<l.length;n++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](l[n])}))?l.splice(n--,1):(o=!1,i<s&&(s=i));if(o){e.splice(d--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[l,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/sarms/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,i,s=l[0],o=l[1],n=l[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(n)var d=n(a)}for(t&&t(l);u<s.length;u++)i=s[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},l=self["webpackChunksarms_front"]=self["webpackChunksarms_front"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(6802)}));l=a.O(l)})();
//# sourceMappingURL=app.c29e7d3e.js.map